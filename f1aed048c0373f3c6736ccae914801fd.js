require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var s=e[n]=new t.Module(n);r[n][0].call(s.exports,i,s,s.exports)}return e[n].exports}function o(r){this.id=r,this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.isParcelRequire=!0,t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({26:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function n(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var t=function(){function t(n){e(this,t),this.state={},this.props=n||{},this.container=null,this.inner=null}return n(t,[{key:"updateState",value:function(n){return this.state=Object.assign({},this.state,n),this.display()}},{key:"update",value:function(n){return this.props=Object.assign({},this.props,n),this.display()}},{key:"display",value:function(){var n=this.render();this.container.innerHTML="",this.inner&&(this.inner.innerHTML="");var e=this.inner||this.container;if("string"==typeof n)e.innerHTML=n;else if(Array.isArray(n)){var t=!0,i=!1,r=void 0;try{for(var a,o=n[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s&&e.appendChild(s)}}catch(n){i=!0,r=n}finally{try{!t&&o.return&&o.return()}finally{if(i)throw r}}}else e.appendChild(n);return this.inner&&this.container.appendChild(e),this.container}},{key:"unmount",value:function(){this.onBeforeUnmount()}},{key:"render",value:function(){}},{key:"init",value:function(){}},{key:"onBeforeUnmount",value:function(){}}]),t}();exports.default=t;
},{}],38:[function(require,module,exports) {
module.exports="bfa5d2ed1ef1653de12b6ed1c4ff56be.png";
},{}],40:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.hoursDiff=function(e,t){var r=e.getHours(),n=t.getHours();return{hours:n<r?n-r+24:n-r,shift:n<r}},t=exports.minutesDiff=function(e,t){var r=e.getMinutes(),n=t.getMinutes();return{minutes:n<r?n-r+60:n-r,shift:n<r}},r=exports.readableETA=function(e,t){var r=[];return e>0&&r.push(e+" h"),t>0&&r.push(t+" min"),r.join(" ")},n=exports.addETACSSClass=function(e,t){var r="";return 0==e?(t>5&&(r="left-more-five"),t>1&&t<=5&&(r="left-one-five"),1==t&&(r="left-one"),t<1&&(r="ready")):r="left-more-five",r},u=exports.getETA=function(u,s){arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o=new Date(u),i=new Date(s),a={hours:0},f={minutes:0};return o<i&&(a=e(o,i),(f=t(o,i)).shift&&(a.hours-=1)),{hours:a.hours,minutes:f.minutes,ready:a.hours<=0&&f.minutes<=0,readable:r(a.hours,f.minutes),cssclass:n(a.hours,f.minutes)}},s=exports.minuteTimer=function(){return new Promise(function(e,t){setTimeout(function(){e("ready")},6e4)})},o=exports.HHMMSS=function(e){var t=new Date(e),r=t.getHours(),n=t.getMinutes(),u=t.getSeconds();return(r=r<10?"0"+r:r)+":"+(n=n<10?"0"+n:n)+":"+(u=u<10?"0"+u:u)},i=exports.DDMonthYYYYhhmm=function(e){var t=new Date(e);return t.getDate()+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]+" "+t.getFullYear()+", "+t.getHours()+":"+t.getMinutes()},a=exports.clock=function e(t,r){var n=document.getElementById(t),u=new Date,s=u.getHours(),o=u.getMinutes(),i=u.getSeconds(),a="<span>"+(s=s<10?"0"+s:s)+":"+(o=o<10?"0"+o:o)+":"+(i=i<10?"0"+i:i)+"</span>";if(r)return setTimeout(e,1e3,t,!1),a;n.innerHTML=a,setTimeout(e,1e3,t,!1)};
},{}],30:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),n=require("../../component"),t=o(n),a=require("../../style/img/logo.png"),r=o(a),i=require("../../utils/time");function o(e){return e&&e.__esModule?e:{default:e}}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function l(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var p=function(n){function a(e){s(this,a);var n=u(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return n.container=document.createElement("header"),n}return l(a,t.default),e(a,[{key:"render",value:function(){var e=this.props.userAuth,n=this.props.path,t='\n            <div id="auth-box">\n                <a href="#/signin" tabindex="0" title="Sign in" class="box-radius-5 box-shadow-2"><span>Sign in</span></a>\n            </div>';return"/signin"!==n||e||(t='\n            <div id="auth-box">\n                <a href="#/signup" tabindex="0" title="Sign up" class="box-radius-5 box-shadow-2"><span>Sign up</span></a>\n            </div>'),e&&"/logout"!==n&&(t='\n            <nav>\n                <a href="#/pizza" title="Create Pizza" tabindex="0"'+("/pizza"===n?'class="current"':"")+'><span>Create</span></a>\n                <a href="#/list" title="Dashboard" tabindex="0"'+("/list"===n?'class="current"':"")+'><span>Dashboard</span></a>\n                <a href="#/user" title="User info" tabindex="0"'+("/user"===n?'class="current"':"")+'><span>User</span></a>\n                <a href="#/logout" id="logout-link" title="Logout" tabindex="0"><span>Logout</span></a>\n            </nav>'),'\n        <div id="header-inner">\n            <div id="logo-wrap"><a href="#/" tabindex="0" aria-label="home"><img src="'+r.default+'" alt="Pizza App Logo"></a></div>\n            <div id="dial-wrap"><span id="dial">'+(0,i.clock)("dial",!0)+'</span></div>\n            <div id="nav-wrap">'+t+"</div>\n        </div>"}}]),a}();exports.default=p;
},{"../../component":26,"../../style/img/logo.png":38,"../../utils/time":40}],29:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=r(t);function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(t){function r(e){o(this,r);var t=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.container=document.createElement("footer"),t}return a(r,n.default),e(r,[{key:"render",value:function(){return'\n        <footer>\n            <div id="footer-inner">\n                <div id="footer-address">\n                    <address>Kottans, Kottans Str. 1, <a href="tel:577-788-87" tabindex="0">tel. 577-788-87</a></address>\n                </div>\n                <div id="footer-copyright">\n                    Pizza Manager Â© 2018\n                </div>\n            </div>\n        </footer>'}}]),r}();exports.default=u;
},{"../../component":26}],76:[function(require,module,exports) {
module.exports="4fd8de0769e8ee1a355048db9776530a.gif";
},{}],62:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.validateElements=exports.loadImage=exports.canvasToFile=exports.USD=exports.waitingbar=void 0;var e=require("../style/img/waiting.gif"),r=t(e);function t(e){return e&&e.__esModule?e:{default:e}}var n=exports.waitingbar='<div id="waiting"><img src="'+r.default+'" alt="waiting"></div>',a=exports.USD=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e).replace("$","$ ")},i=exports.canvasToFile=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";return new Promise(function(t,n){e.toBlob(function(e){return t(e)},r)})},o=exports.loadImage=function(e,r){return new Promise(function(t,n){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){return t({name:e,image:a})},a.onerror=function(e){return n(new Error("system"))},a.src=r,(a.complete||void 0===a.complete)&&(a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",a.src=r)})},s=exports.validateElements=function(e,r){var t={result:!0,errors:[]};for(var n in r)if(e[n]){var a=e[n].value?e[n].value.trim():"",i=r[n];if(i.required&&!0===i.required.rule&&a.length<1){t.result=!1,t.errors.push(i.required.message);continue}if(i.min&&a.length>0&&a.length<i.min.rule){t.result=!1,t.errors.push(i.min.message);continue}if(i.max&&a.length>0&&a.length>i.max.rule){t.result=!1,t.errors.push(i.max.message);continue}if(i.pattern&&a.length>0&&a.search(i.pattern.rule)<0){t.result=!1,t.errors.push(i.pattern.message);continue}if(i.equal&&a.length>0&&e[i.equal.rule]&&e[i.equal.rule].value!==a){t.result=!1,t.errors.push(i.equal.message);continue}if(i.checked){var o=!1,s=!0,u=!1,l=void 0;try{for(var c,m=Array.prototype.slice.call(e[n])[Symbol.iterator]();!(s=(c=m.next()).done);s=!0){o|=c.value.checked}}catch(e){u=!0,l=e}finally{try{!s&&m.return&&m.return()}finally{if(u)throw l}}if(!o){t.result=!1,t.errors.push(i.checked.message);continue}}}return t};
},{"../style/img/waiting.gif":76}],79:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,s=exports.signupFormRules={username:{required:{rule:!0,message:"Username is required."},min:{rule:2,message:"Username is not valid. Min length is 2."},max:{rule:24,message:"Username is not valid. Max length is 24."},pattern:{rule:/^\w+$/,message:"Username must be alphanumeric word."}},password:{required:{rule:!0,message:"Password is required."},min:{rule:8,message:"Password is not valid. Min length is 8."},max:{rule:24,message:"Password is not valid. Max length is 24."}},password_repeat:{required:{rule:!0,message:"Pass repeat is required."},equal:{rule:"password",message:"Passwords are not equivalent."}},email:{required:{rule:!0,message:"Email is required."},min:{rule:6,message:"Email is not valid. Min length is 6."},max:{rule:24,message:"Email is not valid. Max length is 24."},pattern:{rule:e,message:"Should be valid email."}},store_password:{required:{rule:!0,message:"Store pass is required."},min:{rule:8,message:"Store pass is not valid. Min length is 8."},max:{rule:24,message:"Store pass is not valid. Max length is 24."}}};
},{}],67:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),e=require("../../component"),r=a(e),n=require("../../utils/util"),s=require("./signup.form.rules");function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(e){function a(t){o(this,a);var e=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,t));return e.state={elements:{store_id:"",store_password:"",username:"",password:"",password_repeat:"",email:""},errors:[]},e.container=document.createElement("div"),e.container.addEventListener("submit",e.handlerSubmit.bind(e)),e.container.addEventListener("focusin",e.handlerFocus.bind(e)),e}return l(a,r.default),t(a,[{key:"handlerSubmit",value:function(t){t.preventDefault();var e=t.target.elements.username.value.trim(),r=t.target.elements.password.value.trim(),a=t.target.elements.email.value.trim(),o=t.target.elements.store_password.value.trim(),i=t.target.elements.password_repeat.value.trim(),l=t.target.elements.store_id.value.trim();l=parseInt(1*l);var u=(0,n.validateElements)(t.target.elements,s.signupFormRules);this.updateState({elements:{store_id:l,store_password:o,username:e,password:r,password_repeat:i,email:a},errors:u.errors}),u.result&&this.props.onSubmitForm({store_id:l,store_password:o,username:e,password:r,password_repeat:i,email:a})}},{key:"handlerFocus",value:function(t){document.getElementById("form-errors").innerHTML=""}},{key:"render",value:function(){var t=this.state.elements,e=t.store_id,r=t.store_password,n=t.username,s=t.password,a=t.password_repeat,o=t.email,i=this.props.stores,l=this.state.errors;return i=i.map(function(t){return'<option value="'+t.id+'"'+(t.id==e?"selected":"")+">"+t.name+"</option>"}).join(""),l=(l=l.concat(this.props.errors||[])).length?"<ul>"+l.map(function(t){return"<li>"+t+"</li>"}).join("")+"</ul>":"",'\n\t\t<div id="auth">\n\t\t<h1>Sign up</h1>\n\t\t<form>\n\t\t\t<label class="selectbox">\n\t\t\t\t<span>choose store *</span>\n\t\t\t\t<select id="store_id" name="store_id">'+i+'</select>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>store password *</span>\n\t\t\t\t<input type="password" id="store_password" name="store_password"'+(r?'value="'+r+'"':"")+'>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>username *</span>\n\t\t\t\t<input type="text" id="username" name="username"'+(n?'value="'+n+'"':"")+'>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>password *</span>\n\t\t\t\t<input type="password" id="password" name="password"'+(s?'value="'+s+'"':"")+'>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>password repeat *</span>\n\t\t\t\t<input type="password" id="password_repeat" name="password_repeat"'+(a?'value="'+a+'"':"")+'>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>email *</span>\n\t\t\t\t<input type="text" id="email" name="email"'+(o?'value="'+o+'"':"")+'>\n\t\t\t</label>\n\t\t\t<button class="box-radius-5 box-shadow-2">Sign up</button>\n\t\t</form>\n\t\t<div id="form-errors" class="box-radius-5">'+l+"</div>\n\t\t</div>"}}]),a}();exports.default=u;
},{"../../component":26,"../../utils/util":62,"./signup.form.rules":79}],35:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){t(this,n),this._token=localStorage.getItem("token"),this._claims=JSON.parse(localStorage.getItem("claims"))}return e(n,[{key:"isAuthorized",value:function(){return!this.tokenExpired()||(this.clearStorage(),!1)}},{key:"logout",value:function(){this.clearStorage()}},{key:"tokenExpired",value:function(){return!this.token||Date.now()>1e3*this.claims.exp}},{key:"clearStorage",value:function(){this._claims=null,this._token=null,localStorage.removeItem("token"),localStorage.removeItem("claims")}},{key:"getClaims",value:function(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}return{}}},{key:"saveToken",value:function(e){this.token=e,this.claims=this.getClaims(e)}},{key:"token",get:function(){return this._token},set:function(e){this._token=e,localStorage.setItem("token",e)}},{key:"claims",get:function(){return this._claims},set:function(e){this._claims=e,localStorage.setItem("claims",JSON.stringify(e))}}]),n}(),o=exports.AUTH=new n;
},{}],63:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){e(this,n)}return t(n,[{key:"signin",value:function(t){var e=new Headers;return e.append("content-type","application/json"),fetch("https://pizza-tele.ga/api/v1/user/login",{method:"POST",headers:e,body:JSON.stringify(t)}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"signup",value:function(t){var e=new Headers;return e.append("content-type","application/json"),fetch("https://pizza-tele.ga/api/v1/user/create",{method:"POST",headers:e,body:JSON.stringify(t)}).then(function(t){if(201==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"userinfo",value:function(t){var e=new Headers;return e.append("content-type","application/json"),e.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/user/my_info",{method:"GET",headers:e}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"getstores",value:function(){return fetch("https://pizza-tele.ga/api/v1/store/list").then(function(t){if(200==t.status)return t.json();throw new Error("unknown")},function(t){throw new Error("system")})}}]),n}(),r=exports.AUTHAPI=new n;
},{}],42:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("../../component"),r=c(t),n=require("./signup.form.component"),o=c(n),i=require("../../services/auth.service"),a=require("../../api/auth.api"),u=require("../../services/router.service"),s=require("../../utils/util");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(t){function n(e){f(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={errors:[],stores:[],waiting:!0},t.container=document.createElement("main"),t.container.id="main",t.signupForm=new o.default({onSubmitForm:t.onSubmitForm.bind(t)}),t}return p(n,r.default),e(n,[{key:"init",value:function(){var e=this;a.AUTHAPI.getstores().then(function(t){t&&t.length>0?e.updateState({stores:t,errors:[],waiting:!1}):u.ROUTER.navigateTo("/503")}).catch(function(e){"system"==e.message&&u.ROUTER.navigateTo("/503"),console.log(e)})}},{key:"onSubmitForm",value:function(e){var t=this;this.updateState({errors:[],waiting:!0}),a.AUTHAPI.signup(e).then(function(e){e.success?u.ROUTER.navigateTo("/signup/successful"):t.updateState({errors:e.validations,waiting:!1})}).catch(function(e){"system"==e.message&&u.ROUTER.navigateTo("/503"),t.updateState({errors:[e.message],waiting:!1})})}},{key:"render",value:function(){var e=this.state,t=e.errors,r=e.stores;return e.waiting?s.waitingbar:this.signupForm.update({errors:t,stores:r})}}]),n}();exports.default=g;
},{"../../component":26,"./signup.form.component":67,"../../services/auth.service":35,"../../api/auth.api":63,"../../services/router.service":28,"../../utils/util":62}],43:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),n=require("../../component"),t=r(n);function r(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function i(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var c=function(n){function r(e){o(this,r);var n=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.container=document.createElement("main"),n.container.id="main",n}return u(r,t.default),e(r,[{key:"render",value:function(){return'\n        <div id="info" class="info-successful">\n            <div id="info_inner">\n                <p>Registration completed successfully.</p>\n                <p>Now you can <a href="#/signin" title="sign in">sign in</a>.</p>\n            </div>\n        </div>'}}]),r}();exports.default=c;
},{"../../component":26}],78:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.signinFormRules={username:{required:{rule:!0,message:"Username is required."},min:{rule:2,message:"Username is not valid. Min length is 2."},max:{rule:24,message:"Username is not valid. Max length is 24."},pattern:{rule:/^\w+$/,message:"Username must be alphanumeric word."}},password:{required:{rule:!0,message:"Password is required."},min:{rule:8,message:"Password is not valid. Min length is 8."},max:{rule:24,message:"Password is not valid. Max length is 24."}}};
},{}],68:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=a(t),r=require("../../utils/util"),o=require("./signin.form.rules");function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(t){function a(e){s(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.state={elements:{username:"",password:""},errors:[]},t.container=document.createElement("div"),t.container.addEventListener("submit",t.handlerSubmit.bind(t)),t.container.addEventListener("focusin",t.handlerFocus.bind(t)),t}return u(a,n.default),e(a,[{key:"handlerSubmit",value:function(e){e.preventDefault();var t=e.target.elements.username.value.trim(),n=e.target.elements.password.value.trim(),a=(0,r.validateElements)(e.target.elements,o.signinFormRules);this.updateState({elements:{username:t,password:n},errors:a.errors}),a.result&&this.props.onSubmitForm({username:t,password:n})}},{key:"handlerFocus",value:function(e){document.getElementById("form-errors").innerHTML=""}},{key:"render",value:function(){var e=this.state.elements,t=e.username,n=e.password,r=this.state.errors;return r=(r=r.concat(this.props.errors||[])).length?"<ul>"+r.map(function(e){return"<li>"+e+"</li>"}).join("")+"</ul>":"",'\n\t\t<div id="auth">\n\t\t<h1>Sign in</h1>\n\t\t<form>\n\t\t\t<label>\n\t\t\t\t<span>username *</span>\n\t\t\t\t<input type="text" id="username" name="username"'+(t?'value="'+t+'"':"")+'>\n\t\t\t</label>\n\t\t\t<label>\n\t\t\t\t<span>password *</span>\n\t\t\t\t<input type="password" id="password" name="password"'+(n?'value="'+n+'"':"")+'>\n\t\t\t</label>\n\t\t\t<button class="box-radius-5 box-shadow-2">Sign in</button>\n\t\t</form>\n\t\t<div id="form-errors" class="box-radius-5">'+r+"</div>\n\t\t</div>"}}]),a}();exports.default=l;
},{"../../component":26,"../../utils/util":62,"./signin.form.rules":78}],44:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("../../component"),r=c(t),n=require("./signin.form.component"),i=c(n),o=require("../../services/auth.service"),a=require("../../api/auth.api"),u=require("../../services/router.service"),s=require("../../utils/util");function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(t){function n(e){f(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={errors:[],waiting:!1},t.container=document.createElement("main"),t.container.id="main",t.signinForm=new i.default({onSubmitForm:t.onSubmitForm.bind(t)}),t}return p(n,r.default),e(n,[{key:"onSubmitForm",value:function(e){var t=this;this.updateState({errors:[],waiting:!0}),a.AUTHAPI.signin(e).then(function(e){e.success?(o.AUTH.saveToken(e.token),u.ROUTER.navigateTo("/user")):t.updateState({errors:[e.error],waiting:!1})}).catch(function(e){"system"==e.message&&u.ROUTER.navigateTo("/503"),t.updateState({errors:[e.message],waiting:!1})})}},{key:"render",value:function(){var e=this.state,t=e.errors;return e.waiting?s.waitingbar:this.signinForm.update({errors:t})}}]),n}();exports.default=b;
},{"../../component":26,"./signin.form.component":68,"../../services/auth.service":35,"../../api/auth.api":63,"../../services/router.service":28,"../../utils/util":62}],64:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(){e(this,n),this.domen="https://pizza-tele.ga/",this.websocketURL="wss://pizza-tele.ga/ws",this.pizzaSheetURL=this.domen+"static/images/pizza.png"}return t(n,[{key:"ingredients",value:function(t){var e=new Headers;return e.append("content-type","application/json"),e.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/ingredient/list",{method:"GET",headers:e}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"tags",value:function(t){var e=new Headers;return e.append("content-type","application/json"),e.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/tag/list",{method:"GET",headers:e}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"create",value:function(t,e){var n=new Headers;return n.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/pizza/create",{method:"POST",headers:n,body:e}).then(function(t){if(201==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"ticket",value:function(t){var e=new Headers;return e.append("content-type","application/json"),e.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/ws/ticket",{method:"GET",headers:e}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}},{key:"list",value:function(t){var e=new Headers;return e.append("content-type","application/json"),e.append("Authorization","Bearer "+t),fetch("https://pizza-tele.ga/api/v1/pizza/list",{method:"GET",headers:e}).then(function(t){if(200==t.status||4==String(t.status).charAt(0))return t.json();throw new Error("The application is not available, please contact your administrator.")},function(t){throw new Error("system")})}}]),n}(),a=exports.STOREAPI=new n;
},{}],45:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),t=require("../../component"),n=c(t),o=require("../../services/auth.service"),i=require("../../api/store.api"),a=require("../../services/router.service"),s=require("../../utils/util"),r=require("../../utils/time");function c(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(t){function c(e){u(this,c);var t=l(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.state={pizzas:[],waiting:!0},t.container=document.createElement("main"),t.container.id="main",t.socket=null,t.socketCallbacks={onopen:t.onOpenSocket.bind(t),onclose:t.onCloseSocket.bind(t),onmessage:t.onMessageSocket.bind(t),onerror:t.onErrorSocket.bind(t)},window.addEventListener("unload",t.onWindowUnload.bind(t)),t}return p(c,n.default),e(c,[{key:"init",value:function(){var e=this;i.STOREAPI.ticket(o.AUTH.token).then(function(e){if(!e.success)throw new Error("auth");return new WebSocket(i.STOREAPI.websocketURL+"?key="+e.token)}).then(function(t){return e.socket=t,Object.assign(e.socket,e.socketCallbacks),i.STOREAPI.list(o.AUTH.token)}).then(function(t){if(t.error)throw new Error("auth");var n=t.results;n.sort(function(e,t){return+(e.time_prepared<t.time_prepared)||+(e.time_prepared===t.time_prepared)-1}),e.updateState({pizzas:n,waiting:!1}),e.timerETA()}).catch(function(t){e.closeSocket(),"system"==t.message&&a.ROUTER.navigateTo("/503"),"auth"==t.message&&a.ROUTER.navigateTo("/signin"),console.log(t)})}},{key:"onOpenSocket",value:function(e){console.log("websocket","connection open successful")}},{key:"onCloseSocket",value:function(e){e.wasClean?console.log("websocket","connection close successful"):console.log("websocket","disconnect"),console.log("websocket","Code: ",e.code,"reason: ",e.reason)}},{key:"onErrorSocket",value:function(e){console.log("websocket","error: ",e.message)}},{key:"onMessageSocket",value:function(e){var t=JSON.parse(e.data),n=this.state.pizzas;"CREATE_PIZZA"==t.event_name&&n.unshift(t.data),"ACCEPT_PIZZA"==t.event_name&&(n=n.filter(function(e){return!(t.data.indexOf(e.uuid)+1)})),this.updateState({pizzas:n})}},{key:"onWindowUnload",value:function(e){this.closeSocket()}},{key:"onBeforeUnmount",value:function(){this.closeSocket()}},{key:"timerETA",value:function(){var e=this;!this.socket||0!=this.socket.readyState&&1!=this.socket.readyState||(0,r.minuteTimer)().then(function(t){e.updateState(),e.timerETA()})}},{key:"closeSocket",value:function(){!this.socket||0!=this.socket.readyState&&1!=this.socket.readyState||this.socket.close()}},{key:"render",value:function(){var e=this.state,t=e.waiting,n=e.pizzas,o="";return o=n.length?n.map(function(e,t){var o,a=(0,r.getETA)(new Date,e.time_prepared);return o=a.ready?'<span class="'+a.cssclass+'">ready</span>':'ETA: <span class="'+a.cssclass+'">'+a.readable+"</span>",'\n\t\t\t\t<div class="pizza">\n\t\t\t\t\t<div class="pizza-img">\n\t\t\t\t\t\t<a href="'+(i.STOREAPI.domen+e.img_url)+'" tabindex="0" title="'+e.name+", "+e.description+'">\n\t\t\t\t\t\t\t<img src="'+(i.STOREAPI.domen+e.img_url)+'" alt="'+e.name+", "+e.description+'">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t        \t<time class="pizza-time"><span title="pizza create time">ct</span> <span class="time">'+(0,r.HHMMSS)(e.created_date)+'</span></time>\n\t\t        \t<div class="pizza-queue">#'+(n.length-t)+'</div>\n\t\t        \t<div class="pizza-eta">'+o+'</div>\n\t\t        \t<div class="pizza-price">'+(0,s.USD)(e.price)+"</div>\n\t        \t</div>"}).join(""):'\n\t\t\t\t<div class="pizza">\n\t\t\t\t\t<div class="pizza-btn-link">\n\t\t\t\t\t\t<a href="#/pizza" tabindex="0" title="Add pizza"><span>+ Add</span></a>\n\t\t\t\t\t</div>\n\t\t        \t<div class="pizza-no">No pizzas in the queue.</div>\n\t        \t</div>',t?s.waitingbar:'<div class="pizzas">'+o+"</div>"}}]),c}();exports.default=d;
},{"../../component":26,"../../services/auth.service":35,"../../api/store.api":64,"../../services/router.service":28,"../../utils/util":62,"../../utils/time":40}],46:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=o(t),r=require("../../services/router.service");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(t){function o(e){i(this,o);var t=u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.container=document.createElement("main"),t.container.id="main",t}return a(o,n.default),e(o,[{key:"render",value:function(){return'\n        <div id="info" class="info-404">\n            <div id="info_inner" class="box-radius-5 box-shadow-2">\n                <h1>404</h1>\n                '+(r.ROUTER.oldURL?'<p>This page <a href="'+r.ROUTER.oldURL+'">'+r.ROUTER.oldURL+"</a> was not found.</p>":"")+"\n            </div>\n        </div>"}}]),o}();exports.default=c;
},{"../../component":26,"../../services/router.service":28}],47:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=o(t),r=require("../../services/router.service");function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(t){function o(e){i(this,o);var t=a(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.container=document.createElement("main"),t.container.id="main",t}return u(o,n.default),e(o,[{key:"render",value:function(){return'\n        <div id="info" class="info-503">\n            <div id="info_inner" class="box-radius-5 box-shadow-2">\n                <h1>503</h1>\n                '+(r.ROUTER.oldURL?'<p>Service Unavailable.</p>\n        <p><a href="'+r.ROUTER.oldURL+'">Try again</a> or contact <a href="mailto:ermondel@gmail.com" title="support">support</a>.</p>':"")+"\n            </div>\n        </div>"}}]),o}();exports.default=c;
},{"../../component":26,"../../services/router.service":28}],49:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),n=require("../../component"),t=r(n),o=require("../../services/auth.service");function r(e){return e&&e.__esModule?e:{default:e}}function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var c=function(n){function r(e){i(this,r);var n=u(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.container=document.createElement("main"),n.container.id="main",n}return a(r,t.default),e(r,[{key:"init",value:function(){o.AUTH.logout()}},{key:"render",value:function(){return'\n        <div id="info" class="info-logout">\n            <div id="info_inner" class="box-radius-5 box-shadow-2">\n                <p>You have successfully logged out.</p>\n                <p><a href="#/signin">Sign in</a> again or go to the <a href="#/">main page</a>.</p>\n            </div>\n        </div>'}}]),r}();exports.default=c;
},{"../../component":26,"../../services/auth.service":35}],48:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=s(t),r=require("../../services/auth.service"),i=require("../../api/auth.api"),o=require("../../services/router.service"),a=require("../../utils/util"),u=require("../../utils/time");function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(t){function s(e){c(this,s);var t=l(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.state={data:{},waiting:!0},t.container=document.createElement("main"),t.container.id="main",t}return f(s,n.default),e(s,[{key:"init",value:function(){var e=this;i.AUTHAPI.userinfo(r.AUTH.token).then(function(t){t.error?o.ROUTER.navigateTo("/signin"):e.updateState({data:t,waiting:!1})}).catch(function(e){"system"==e.message&&o.ROUTER.navigateTo("/503"),console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.data;return e.waiting?a.waitingbar:'\n        <div id="userinfo">\n            <h1>User</h1>\n            <div>'+t.username+"</div>\n            <div>"+t.email+"</div>\n            <div><span>created at:</span> "+(0,u.DDMonthYYYYhhmm)(t.created_at)+"</div>\n            <div><span>last login:</span> "+(0,u.DDMonthYYYYhhmm)(t.last_login)+"</div>\n        </div>"}}]),s}();exports.default=p;
},{"../../component":26,"../../services/auth.service":35,"../../api/auth.api":63,"../../services/router.service":28,"../../utils/util":62,"../../utils/time":40}],85:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.pizzaFormRules={ingredient:{checked:{rule:!0,message:"Choose ingredients. Min 1. Max 6."}},name:{required:{rule:!0,message:"Name is required."},min:{rule:3,message:"Name is not valid. Min length is 3."},max:{rule:24,message:"Name is not valid. Max length is 24."},pattern:{rule:/^\w+$/,message:"Name must be alphanumeric word."}},description:{max:{rule:124,message:"Description is not valid. Max length is 124."}}};
},{}],72:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),n=require("../../component"),t=i(n),r=require("../../utils/util"),a=require("./pizza.form.rules");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function s(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function l(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var c=function(n){function i(e){o(this,i);var n=s(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return n.container=document.createElement("form"),n.container.id="create",n.container.addEventListener("change",n.handlerChange.bind(n)),n.container.addEventListener("submit",n.handlerSubmit.bind(n)),n.container.addEventListener("focusin",n.handlerFocus.bind(n)),n}return l(i,t.default),e(i,[{key:"handlerChange",value:function(e){"checkbox"===e.target.type&&("ingredient"===e.target.name&&this.props.onChangeIngredient(e.target.value,e.target.checked),"tag"===e.target.name&&this.props.onChangeTag(e.target.value,e.target.checked)),"radio"===e.target.type&&"size"===e.target.name&&this.props.onChangeSize(e.target.value)}},{key:"handlerSubmit",value:function(e){e.preventDefault();var n=e.target.elements.name.value.trim(),t=e.target.elements.description.value.trim(),i=(0,r.validateElements)(e.target.elements,a.pizzaFormRules);i.result?this.props.onSubmit(n,t):this.props.onErrorValidate(i.errors)}},{key:"handlerFocus",value:function(e){document.getElementById("form-errors").innerHTML=""}},{key:"renderIngredients",value:function(){var e=this.props.ingredients,n=0,t=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.checked&&n++}}catch(e){r=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw a}}return e.map(function(e){var t=e.checked?' checked="checked"':"",r=!e.checked&&n>=6?" disabled":"";return'\n            <label title="'+e.description+'">\n                <input type="checkbox" name="ingredient" value="'+e.id+'"'+t+r+'>\n                <span class="ingredient"><img src="'+e.image.src+'" alt="'+e.description+'"><span>'+e.name+"</span></span>\n            </label>"}).join("")}},{key:"renderTags",value:function(){return this.props.tags.map(function(e){return'\n        <label title="'+e.description+'">\n            <input type="checkbox" name="tag" value="'+e.id+'" '+(e.checked?'checked="checked"':"")+'>\n            <span class="tag"><span>'+e.name+"</span></span>\n        </label>"}).join("")}},{key:"renderErrors",value:function(){var e=this.props.errors;return e.length?"<ul>"+e.map(function(e){return"<li>"+e+"</li>"}).join("")+"</ul>":""}},{key:"render",value:function(){var e=this.props,n=e.size,t=e.price;e.errors;return'\n        <div id="size-box">\n            <span class="legend">Pizza size</span> \n            <label><input type="radio" name="size" value="30"'+(30==n?'checked="checked"':"")+'> <span>30Â°</span></label>\n            <label><input type="radio" name="size" value="45"'+(45==n?'checked="checked"':"")+'> <span>45Â°</span></label>\n            <label><input type="radio" name="size" value="60"'+(60==n?'checked="checked"':"")+'> <span>60Â°</span></label>\n        </div>\n        <div id="ingredient-box">'+this.renderIngredients()+'</div>\n        <div id="tag-box">'+this.renderTags()+'</div>\n        <div id="text-box">\n            <label>\n                <span>Pizza name *</span>\n                <input type="text" id="name" name="name">\n            </label>\n            <label>\n                <span>Description</span>\n                <input type="text" id="description" name="description">\n            </label>\n        </div>\n        <div id="price-box">\n            Total price: <strong>'+t+'</strong>\n        </div>\n        <div id="submit-box">\n            <button class="box-radius-5 box-shadow-2">Submit</button>\n        </div>\n        <div id="form-errors" class="box-radius-5">'+this.renderErrors()+"</div>"}}]),i}();exports.default=c;
},{"../../component":26,"../../utils/util":62,"./pizza.form.rules":85}],80:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,r,a){return r&&t(e.prototype,r),a&&t(e,a),e}}();function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(){e(this,r),this.imagesStack=[],this._ctx=null}return t(r,[{key:"init",value:function(t){this._ctx=t}},{key:"radius",value:function(t){return this.center(t)}},{key:"center",value:function(t){return Math.round(t/2)}},{key:"drawRoundSheet",value:function(t,e,r){var a=this._ctx.canvas.width,i=this._ctx.canvas.height,n=this.center(a)-this.center(e),c=this.center(i)-this.center(r);this._ctx.clearRect(0,0,a,i),this._ctx.drawImage(t,n,c,e,r)}},{key:"drawRoundImage",value:function(t,e,r){e=e+this.center(this._ctx.canvas.width)-this.center(t.width),r=r+this.center(this._ctx.canvas.height)-this.center(t.height),this._ctx.drawImage(t,e,r,t.width,t.height)}},{key:"coordFromTriangle",value:function(t,e){var r=t*Math.PI/180,a={x:0,y:0};return a.y=Math.round(e*Math.sin(r)),a.x=Math.round(e*Math.cos(r)),a}},{key:"circlesInCircle",value:function(t,e){for(var r=this.radius(e),a=Math.round(90/t),i=a,n=0,c=1;c<=4;c++)for(var h=1;h<=t;h++){if(!this.imagesStack[n]){c=5;break}var s=this.coordFromTriangle(i,r);this.drawRoundImage(this.imagesStack[n],s.x,s.y),i+=a,n++}}},{key:"imagesStackFill",value:function(t,e){if(this.imagesStack=[],t.length&&e)for(var r=0;r<e;){var a=!0,i=!1,n=void 0;try{for(var c,h=t[Symbol.iterator]();!(a=(c=h.next()).done);a=!0){var s=c.value;if(this.imagesStack.push(s.image),++r>=e)break}}catch(t){i=!0,n=t}finally{try{!a&&h.return&&h.return()}finally{if(i)throw n}}}}}]),r}(),a=exports.TRIG=new r;
},{}],84:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=exports.pizzaPaneRules=[{size:60,diameter:320,circles:[{diameter:226,numInQuadrant:6},{diameter:150,numInQuadrant:5},{diameter:74,numInQuadrant:2}]},{size:45,diameter:290,circles:[{diameter:196,numInQuadrant:5},{diameter:120,numInQuadrant:3},{diameter:44,numInQuadrant:1}]},{size:30,diameter:260,circles:[{diameter:176,numInQuadrant:4},{diameter:110,numInQuadrant:2},{diameter:44,numInQuadrant:1}]}];
},{}],73:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("../../component"),r=o(t),n=require("../../services/trig.service"),i=require("./pizza.pane.rules");function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(t){function o(e){a(this,o);var t=u(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.container=document.createElement("div"),t.container.id="pane",t}return c(o,r.default),e(o,[{key:"render",value:function(){var e=this.props,t=e.pizza_sheet,r=e.size,o=e.ingredients,a=e.canvas,u=e.ctx,c=i.pizzaPaneRules.find(function(e){return Number(r)===e.size});if(t&&c){n.TRIG.init(u),n.TRIG.drawRoundSheet(t,c.diameter,c.diameter);var l=!0,f=!1,s=void 0;try{for(var p,d=c.circles[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var y=p.value;n.TRIG.imagesStackFill(o,4*y.numInQuadrant),n.TRIG.circlesInCircle(y.numInQuadrant,y.diameter)}}catch(e){f=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(f)throw s}}}return a}}]),o}();exports.default=l;
},{"../../component":26,"../../services/trig.service":80,"./pizza.pane.rules":84}],51:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=d(t),r=require("./pizza.form.component"),a=d(r),i=require("./pizza.pane.component"),o=d(i),s=require("../../services/auth.service"),u=require("../../api/store.api"),c=require("../../services/router.service"),l=require("../../utils/util");function d(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(t){function r(e){h(this,r);var t=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={size:60,ingredients:[],tags:[],pizza_sheet:null,waiting:!0,errors:[]},t.container=document.createElement("main"),t.container.id="main",t.inner=document.createElement("div"),t.inner.id="pane-form",t.pizzaForm=new a.default({onChangeIngredient:t.onChangeIngredient.bind(t),onChangeTag:t.onChangeTag.bind(t),onChangeSize:t.onChangeSize.bind(t),onSubmit:t.onSubmit.bind(t),onErrorValidate:t.onErrorValidate.bind(t)}),t.canvas=document.createElement("canvas"),t.canvas.width=320,t.canvas.height=320,t.ctx=t.canvas.getContext("2d"),t.pizzaPane=new o.default({canvas:t.canvas,ctx:t.ctx}),t}return g(r,n.default),e(r,[{key:"init",value:function(){var e=this,t={ingredients:[],tags:[],pizza_sheet:null,waiting:!0};(0,l.loadImage)("pizza_sheet",u.STOREAPI.pizzaSheetURL).then(function(e){return e.image}).then(function(e){return t.pizza_sheet=e,u.STOREAPI.ingredients(s.AUTH.token)}).then(function(e){if(e.error)throw new Error("auth");return t.ingredients=e.results,u.STOREAPI.tags(s.AUTH.token)}).then(function(e){if(e.error)throw new Error("auth");return t.tags=e.results,Promise.all(t.ingredients.map(function(e){return(0,l.loadImage)(e.name,u.STOREAPI.domen+e.image_url)}))}).then(function(n){n.forEach(function(e,n){return t.ingredients[n].image=e.image}),t.waiting=!1,e.updateState(t)}).catch(function(e){"system"==e.message&&c.ROUTER.navigateTo("/503"),"auth"==e.message&&c.ROUTER.navigateTo("/signin"),console.log(e)})}},{key:"onChangeIngredient",value:function(e,t){var n=this.state.ingredients;this.updateState({ingredients:this.checkedById(n,e,t),errors:[]})}},{key:"onChangeTag",value:function(e,t){var n=this.state.tags;this.updateState({tags:this.checkedById(n,e,t),errors:[]})}},{key:"onChangeSize",value:function(e){this.updateState({size:e,errors:[]})}},{key:"onErrorValidate",value:function(e){this.updateState({errors:e})}},{key:"onSubmit",value:function(e,t){var n=this;this.updateState({waiting:!0}),(0,l.canvasToFile)(this.canvas).then(function(r){return u.STOREAPI.create(s.AUTH.token,n.pizzaFormData(e,t,r))}).then(function(e){e.success?c.ROUTER.navigateTo("/pizza/successful"):n.updateState({errors:e.validations,waiting:!1})}).catch(function(e){"system"==e.message&&c.ROUTER.navigateTo("/503"),n.updateState({errors:[e.message],waiting:!1})})}},{key:"pizzaFormData",value:function(e,t,n){var r=this.state,a=r.size,i=r.ingredients,o=r.tags,s=new FormData;return s.append("name",e),s.append("size",Number(a)),s.append("description",t),s.append("image",n,"my_canvas.png"),s.append("tags",JSON.stringify(this.getCheckedIDs(o))),s.append("ingredients",JSON.stringify(this.getCheckedIDs(i))),s}},{key:"getCheckedIDs",value:function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;s.checked&&t.push(s.id)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return t}},{key:"checkedById",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value;if(u.id==t){u.checked=n;break}}}catch(e){a=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw i}}return e}},{key:"calculatePrice",value:function(){var e=this.state,t=e.size,n=e.ingredients,r=0,a=!0,i=!1,o=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;c.checked&&(r+=c.price)}}catch(e){i=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(i)throw o}}return(0,l.USD)(t/5+r)}},{key:"render",value:function(){var e=this.state,t=e.size,n=e.ingredients,r=e.tags,a=e.pizza_sheet,i=e.waiting,o=e.errors,s=n.filter(function(e){return e.checked});return i?l.waitingbar:[this.pizzaPane.update({pizza_sheet:a,size:t,ingredients:s}),this.pizzaForm.update({size:t,ingredients:n,tags:r,price:this.calculatePrice(),errors:o})]}}]),r}();exports.default=p;
},{"../../component":26,"./pizza.form.component":72,"./pizza.pane.component":73,"../../services/auth.service":35,"../../api/store.api":64,"../../services/router.service":28,"../../utils/util":62}],50:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("../../component"),n=r(t);function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(t){function r(e){o(this,r);var t=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.container=document.createElement("main"),t.container.id="main",t}return a(r,n.default),e(r,[{key:"render",value:function(){return'\n        <div id="info" class="info-successful">\n            <div id="info_inner" class="box-radius-5">\n                <p>Pizza successfully created.</p>\n                <p>See <a href="#/list">dashboard</a>, or <a href="#/pizza">create new pizza</a>.</p>\n            </div>\n        </div>'}}]),r}();exports.default=u;
},{"../../component":26}],34:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.routes=void 0;var e=require("./components/signup/signup.component"),n=v(e),o=require("./components/signup/signup.successful.component"),t=v(o),u=require("./components/signin/signin.component"),i=v(u),s=require("./components/list/list.component"),p=v(s),c=require("./components/none/none.component"),r=v(c),a=require("./components/serveroff/serveroff.component"),d=v(a),l=require("./components/logout/logout.component"),m=v(l),f=require("./components/user/user.component"),z=v(f),g=require("./components/pizza/pizza.component"),h=v(g),_=require("./components/pizza/pizza.successful.component"),q=v(_);function v(e){return e&&e.__esModule?e:{default:e}}var w=exports.routes=[{path:"",redirectTo:"/list"},{id:"Sign up",path:"/signup",component:n.default,deny:["authorized_user"],unaccepted:"/user"},{id:"Successful sign up",path:"/signup/successful",component:t.default,deny:["authorized_user"],unaccepted:"/user"},{id:"Sign in",path:"/signin",component:i.default,deny:["authorized_user"],unaccepted:"/user"},{id:"List",path:"/list",component:p.default,allow:["authorized_user"],unaccepted:"/signin"},{id:"Logout",path:"/logout",component:m.default},{id:"User",path:"/user",component:z.default,allow:["authorized_user"],unaccepted:"/signin"},{id:"Not found",path:"/404",component:r.default},{id:"503 Service Unavailable",path:"/503",component:d.default},{id:"Add new pizza",path:"/pizza",component:h.default,allow:["authorized_user"],unaccepted:"/signin"},{id:"Pizza successfully created",path:"/pizza/successful",component:q.default,allow:["authorized_user"],unaccepted:"/signin"}];
},{"./components/signup/signup.component":42,"./components/signup/signup.successful.component":43,"./components/signin/signin.component":44,"./components/list/list.component":45,"./components/none/none.component":46,"./components/serveroff/serveroff.component":47,"./components/logout/logout.component":49,"./components/user/user.component":48,"./components/pizza/pizza.component":51,"./components/pizza/pizza.successful.component":50}],28:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ROUTER=void 0;var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=require("../routes"),r=require("./auth.service");function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){n(this,t),this.routes=e,this._oldURL=""}return e(t,[{key:"navigateTo",value:function(e){window.location.hash=e}},{key:"getRoute",value:function(e){var t=this;e&&(this.oldURL=e.oldURL);var n=this.splitPath(this.path),a=this.routes.find(function(e){var a=t.equalPaths(t.splitPath(e.path),n);return!!a.result&&(e.params=a.params,e.auth=r.AUTH.isAuthorized(),e.role=e.auth?"authorized_user":"unauthorized_user",!0)});return a?a.redirectTo?void this.navigateTo(a.redirectTo):a.allow&&a.allow.length&&(!a.auth||a.allow.indexOf(a.role)<0)?void this.navigateTo(a.unaccepted?a.unaccepted:"/404"):a.deny&&a.deny.length&&a.deny.indexOf(a.role)>=0?void this.navigateTo(a.unaccepted?a.unaccepted:"/404"):a:void this.navigateTo("/404")}},{key:"splitPath",value:function(e){return e.split("/").filter(function(e){return e.trim().length>0})}},{key:"equalPaths",value:function(e,t){var r={result:!1,params:{}};if(!e.length&&!t.length)return r.result=!0,r;if(!e.length&&t.length)return r.result=!1,r;if(e.length!==t.length)return r.result=!1,r;for(var n in e){if(void 0===t[n]){r.result=!1,r.params={};break}if(":id"===e[n]){var a=parseInt(1*t[n]);if(!a){r.result=!1,r.params={};break}r.result=!0,r.params.id=a}else{if(e[n]!==t[n]){r.result=!1,r.params={};break}r.result=!0}}return r}},{key:"path",get:function(){return window.location.hash.slice(1)}},{key:"oldURL",get:function(){return this._oldURL},set:function(e){this._oldURL=e}}]),t}(),i=exports.ROUTER=new a(t.routes);
},{"../routes":34,"./auth.service":35}],24:[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t=require("./component"),n=c(t),r=require("./components/header/header.component"),o=c(r),a=require("./components/footer/footer.component"),u=c(a),i=require("./services/router.service");function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(t){function r(e){s(this,r);var t=f(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.state={route:null,content:null},t.container=e.container,t.header=new o.default,t.footer=new u.default,window.addEventListener("hashchange",t.handlerHashchange.bind(t)),t}return l(r,n.default),e(r,[{key:"init",value:function(){this.handlerHashchange()}},{key:"handlerHashchange",value:function(e){var t=i.ROUTER.getRoute(e);if(t){this.state.content&&this.state.content.unmount(),document.title="Pizza App :: "+t.id;var n=new t.component;n.init(),this.updateState({route:t,content:n})}}},{key:"render",value:function(){var e=this.state.content,t=this.state.route;return[this.header.update({userAuth:t.auth,path:t.path}),e.update({}),this.footer.update()]}}]),r}();exports.default=h;
},{"./component":26,"./components/header/header.component":30,"./components/footer/footer.component":29,"./services/router.service":28}],7:[function(require,module,exports) {
"use strict";var e=require("./app"),t=n(e);function n(e){return e&&e.__esModule?e:{default:e}}new t.default({container:document.getElementById("body")}).init();
},{"./app":24}]},{},[7])